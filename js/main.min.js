document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("stats");if(e){const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const s=document.querySelectorAll(".stat-number"),n=document.querySelector(".availability-animation"),o=(e,t)=>{setTimeout((()=>{if(e.classList.contains("stat-number")){const t=parseInt(e.getAttribute("data-target"));let s=0;const n=t/(2e3/16),o=()=>{s+=n,s<t?(e.textContent=100===t?Math.ceil(s)+"%":"+"+Math.ceil(s),requestAnimationFrame(o)):e.textContent=100===t?t+"%":"+"+t};o()}else if(e.classList.contains("availability-animation")){e.style.opacity="0",e.style.transform="translateX(-100px) translateY(-100px)";let t=0,s=-100,n=-100;const o=()=>{t+=.05,t>1&&(t=1),s+=5,s>0&&(s=0),n+=5,n>0&&(n=0),e.style.opacity=t,e.style.transform=`translateX(${s}px) translateY(${n}px)`,t<1||s<0||n<0?requestAnimationFrame(o):e.classList.add("landed")};o()}}),t)};s.forEach(((e,t)=>{o(e,1500*t)})),n&&o(n,1500*s.length),t.unobserve(e.target)}}))}),{threshold:.5});t.observe(e)}const t=document.querySelectorAll(".faq-item");t.forEach((e=>{const s=e.querySelector(".faq-question"),n=e.querySelector(".faq-answer"),o=s.querySelector("i");s&&n&&o&&s.addEventListener("click",(()=>{t.forEach((t=>{if(t!==e){const e=t.querySelector(".faq-answer"),s=t.querySelector(".faq-question i");e&&e.classList.add("hidden"),s&&(s.classList.remove("fa-chevron-up"),s.classList.add("fa-chevron-down"))}})),n.classList.toggle("hidden"),o.classList.toggle("fa-chevron-down"),o.classList.toggle("fa-chevron-up")}))}));const s=document.getElementById("back-to-top");s&&(window.addEventListener("scroll",(()=>{window.pageYOffset>300?s.classList.remove("hidden"):s.classList.add("hidden")})),s.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}))),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth"})}))}));(()=>{const e=document.getElementById("cookie-consent-banner"),t=document.getElementById("cookie-customize-toggle"),s=document.getElementById("cookie-customize-panel"),n=document.getElementById("cookie-accept-all"),o=document.getElementById("cookie-reject-all"),c=document.getElementById("cookie-save-preferences"),r=document.querySelectorAll(".toggle-label");let a={necessary:!0,analytics:!1,marketing:!1,preferences:!1};const l=t=>{const s=new Date;s.setTime(s.getTime()+15552e6);const n=JSON.stringify(t);document.cookie=`cookie_preferences=${encodeURIComponent(n)};expires=${s.toUTCString()};path=/;SameSite=Lax`,i(t),e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout((()=>{e.classList.add("hidden"),e.style.opacity="1",e.style.transform="translateY(0)"}),500)},i=e=>{e.analytics&&console.log("Google Analytics activé"),e.marketing&&console.log("Cookies marketing activés"),e.preferences&&console.log("Cookies de préférences activés"),console.log("Préférences cookies sauvegardées:",e)};r.forEach((e=>{e.addEventListener("click",(function(e){const t=this.getAttribute("for"),s=document.getElementById(t);s&&!s.disabled&&(s.checked=!s.checked,s.checked?(this.classList.add("bg-purple-700"),this.querySelector(".toggle-dot").classList.add("translate-x-4")):(this.classList.remove("bg-purple-700"),this.querySelector(".toggle-dot").classList.remove("translate-x-4"))),e.preventDefault()}))}));const d=(()=>{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const s=e[t].trim();if(s.startsWith("cookie_preferences=")){const e=decodeURIComponent(s.substring(19));try{return JSON.parse(e)}catch(e){return console.error("Erreur lors du parsing des préférences de cookies:",e),null}}}return null})();d?(a=d,i(a)):setTimeout((()=>{e&&e.classList.remove("hidden")}),1e3),t&&t.addEventListener("click",(()=>{s.classList.toggle("hidden")})),n&&n.addEventListener("click",(()=>{a={necessary:!0,analytics:!0,marketing:!0,preferences:!0},document.getElementById("cookie-analytics").checked=!0,document.getElementById("cookie-marketing").checked=!0,document.getElementById("cookie-preferences").checked=!0,l(a)})),o&&o.addEventListener("click",(()=>{a={necessary:!0,analytics:!1,marketing:!1,preferences:!1},document.getElementById("cookie-analytics").checked=!1,document.getElementById("cookie-marketing").checked=!1,document.getElementById("cookie-preferences").checked=!1,l(a)})),c&&c.addEventListener("click",(()=>{a={necessary:!0,analytics:document.getElementById("cookie-analytics").checked,marketing:document.getElementById("cookie-marketing").checked,preferences:document.getElementById("cookie-preferences").checked},l(a)}))})();(()=>{const e=document.getElementById("newsletter-popup"),t=document.getElementById("close-newsletter");!localStorage.getItem("newsletter_popup_closed")&&e&&(setTimeout((()=>{e.classList.remove("translate-y-full")}),12e4),t&&t.addEventListener("click",(()=>{e.classList.add("translate-y-full");const t=new Date;t.setTime(t.getTime()+6048e5),localStorage.setItem("newsletter_popup_closed",t.toUTCString())})))})();const n=document.getElementById("marketing-newsletter-popup"),o=document.getElementById("close-marketing-newsletter");if(n&&o){setTimeout((()=>{localStorage.getItem("marketing_newsletter_closed")||(n.classList.remove("hidden"),n.classList.add("flex"))}),18e4),o.addEventListener("click",(()=>{n.classList.add("hidden"),n.classList.remove("flex"),localStorage.setItem("marketing_newsletter_closed","true")})),n.addEventListener("click",(e=>{e.target===n&&(n.classList.add("hidden"),n.classList.remove("flex"),localStorage.setItem("marketing_newsletter_closed","true"))}));const e=document.getElementById("marketing-newsletter-form");e&&e.addEventListener("submit",(function(e){setTimeout((()=>{n.classList.add("hidden"),n.classList.remove("flex"),localStorage.setItem("marketing_newsletter_closed","true")}),1e3)}))}}));